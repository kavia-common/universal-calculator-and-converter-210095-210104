{"is_source_file": true, "format": "JavaScript", "description": "This file implements an Audit Service for tracking user actions, errors, and system events with audit trail capabilities, including logging, retrieving, exporting, and clearing logs. It also integrates with local storage and app configuration for persistent storage and environment metadata.", "external_files": ["./StorageService", "../config/appConfig"], "external_methods": ["getJSON", "setJSON", "remove"], "published": ["logAction", "getLogs", "exportLogs", "clearLogs", "recordError"], "classes": [], "methods": [{"name": "logAction(userId, actionType, entity, details = {}, options = {})", "description": "Logs a user action with metadata including timestamp, user ID, action type, entity affected, details, and optional context such as before/after state, reason, correlation ID, and additional metadata.", "scope": "", "scopeKind": ""}, {"name": "getLogs(params = {})", "description": "Retrieves paginated audit logs with optional filtering by user ID, action type, entity, time range, correlation ID, and search text.", "scope": "", "scopeKind": ""}, {"name": "exportLogs(format = \"json\")", "description": "Exports all audit logs in JSON or CSV format, with filename timestamped to the export time.", "scope": "", "scopeKind": ""}, {"name": "clearLogs(eSign)", "description": "Clears all audit logs after validating an electronic signature (stub implementation).", "scope": "", "scopeKind": ""}, {"name": "recordError(error, context = {})", "description": "Captures a technical error into the audit trail, including error name, message, stack, and optional extra data.", "scope": "", "scopeKind": ""}, {"name": "buildMetadata()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "generateId(scope = \"id\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "loadAll()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "saveAll(records)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "toStringArray(v)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["getJSON", "setJSON", "storageRemove", "buildMetadata", "generateId", "loadAll", "saveAll"], "search-terms": ["audit trail", "ALCOA+", "compliance", "logging", "export", "error tracking", "local storage", "pagination", "gxp", "recordError"], "state": 2, "file_id": 26, "knowledge_revision": 59, "git_revision": "", "ctags": [{"_type": "tag", "name": "AUDIT_STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^const AUDIT_STORAGE_KEY = \"auditTrail\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "actionType", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^    actionType: act,$/", "language": "JavaScript", "kind": "property", "scope": "logAction.entry", "scopeKind": "class"}, {"_type": "tag", "name": "after", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^    after: options.after ?? null,$/", "language": "JavaScript", "kind": "property", "scope": "logAction.entry", "scopeKind": "class"}, {"_type": "tag", "name": "before", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^    before: options.before ?? null,$/", "language": "JavaScript", "kind": "property", "scope": "logAction.entry", "scopeKind": "class"}, {"_type": "tag", "name": "buildMetadata", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^function buildMetadata() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "clearLogs", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^export function clearLogs(eSign) {$/", "language": "JavaScript", "kind": "function", "signature": "(eSign)"}, {"_type": "tag", "name": "correlationId", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^      correlationId: context?.correlationId,$/", "language": "JavaScript", "kind": "property", "scope": "recordError.options", "scopeKind": "class"}, {"_type": "tag", "name": "correlationId", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^    correlationId: options.correlationId || generateId(\"corr\"),$/", "language": "JavaScript", "kind": "property", "scope": "logAction.entry", "scopeKind": "class"}, {"_type": "tag", "name": "details", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^    const details = {$/", "language": "JavaScript", "kind": "class", "scope": "recordError", "scopeKind": "class"}, {"_type": "tag", "name": "details", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^    details: details && typeof details === \"object\" ? { ...details } : { value: String(details ?/", "language": "JavaScript", "kind": "class", "scope": "logAction.entry", "scopeKind": "class"}, {"_type": "tag", "name": "entity", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^    entity: ent,$/", "language": "JavaScript", "kind": "property", "scope": "logAction.entry", "scopeKind": "class"}, {"_type": "tag", "name": "entry", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^  const entry = {$/", "language": "JavaScript", "kind": "class", "scope": "logAction", "scopeKind": "class"}, {"_type": "tag", "name": "exportLogs", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^export function exportLogs(format = \"json\") {$/", "language": "JavaScript", "kind": "function", "signature": "(format = \"json\")"}, {"_type": "tag", "name": "generateId", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^function generateId(scope = \"id\") {$/", "language": "JavaScript", "kind": "function", "signature": "(scope = \"id\")"}, {"_type": "tag", "name": "getLogs", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^export function getLogs(params = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(params = {})"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^    id: generateId(\"audit\"),$/", "language": "JavaScript", "kind": "property", "scope": "logAction.entry", "scopeKind": "class"}, {"_type": "tag", "name": "loadAll", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^function loadAll() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "logAction", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^export function logAction(userId, actionType, entity, details = {}, options = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, actionType, entity, details = {}, options = {})"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^      message: error?.message ?? String(error ?? \"unknown error\"),$/", "language": "JavaScript", "kind": "property", "scope": "recordError.details", "scopeKind": "class"}, {"_type": "tag", "name": "metadata", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^    metadata: {$/", "language": "JavaScript", "kind": "property", "scope": "logAction.entry", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^      name: error?.name ?? \"Error\",$/", "language": "JavaScript", "kind": "property", "scope": "recordError.details", "scopeKind": "class"}, {"_type": "tag", "name": "options", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^    const options = {$/", "language": "JavaScript", "kind": "class", "scope": "recordError", "scopeKind": "class"}, {"_type": "tag", "name": "reason", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^      reason: context?.reason || \"Technical error captured\",$/", "language": "JavaScript", "kind": "property", "scope": "recordError.options", "scopeKind": "class"}, {"_type": "tag", "name": "reason", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^    reason: reason ?? null,$/", "language": "JavaScript", "kind": "property", "scope": "logAction.entry", "scopeKind": "class"}, {"_type": "tag", "name": "recordError", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^export function recordError(error, context = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(error, context = {})"}, {"_type": "tag", "name": "saveAll", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^function saveAll(records) {$/", "language": "JavaScript", "kind": "function", "signature": "(records)"}, {"_type": "tag", "name": "stack", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^      stack: error?.stack ?? null,$/", "language": "JavaScript", "kind": "property", "scope": "recordError.details", "scopeKind": "class"}, {"_type": "tag", "name": "timestamp", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^    timestamp: new Date().toISOString(),$/", "language": "JavaScript", "kind": "property", "scope": "logAction.entry", "scopeKind": "class"}, {"_type": "tag", "name": "toStringArray", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^function toStringArray(v) {$/", "language": "JavaScript", "kind": "function", "signature": "(v)"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^    userId: uid,$/", "language": "JavaScript", "kind": "property", "scope": "logAction.entry", "scopeKind": "class"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/universal-calculator-and-converter-210095-210104/calculator_frontend/src/services/AuditService.js", "pattern": "/^    details: details && typeof details === \"object\" ? { ...details } : { value: String(details ?/", "language": "JavaScript", "kind": "property", "scope": "logAction.entry.details", "scopeKind": "class"}], "hash": "7e3b1deeebc6ebe32888b347d9d59f9d", "format-version": 4, "code-base-name": "calculator_frontend", "filename": "calculator_frontend/src/services/AuditService.js", "fields": [{"name": "actionType: act,", "scope": "logAction.entry", "scopeKind": "class", "description": "unavailable"}, {"name": "after: options.after ?? null,", "scope": "logAction.entry", "scopeKind": "class", "description": "unavailable"}, {"name": "before: options.before ?? null,", "scope": "logAction.entry", "scopeKind": "class", "description": "unavailable"}, {"name": "correlationId: context?.correlationId,", "scope": "recordError.options", "scopeKind": "class", "description": "unavailable"}, {"name": "correlationId: options.correlationId || generateId(\"corr\"),", "scope": "logAction.entry", "scopeKind": "class", "description": "unavailable"}, {"name": "entity: ent,", "scope": "logAction.entry", "scopeKind": "class", "description": "unavailable"}, {"name": "id: generateId(\"audit\"),", "scope": "logAction.entry", "scopeKind": "class", "description": "unavailable"}, {"name": "message: error?.message ?? String(error ?? \"unknown error\"),", "scope": "recordError.details", "scopeKind": "class", "description": "unavailable"}, {"name": "metadata: {", "scope": "logAction.entry", "scopeKind": "class", "description": "unavailable"}, {"name": "name: error?.name ?? \"Error\",", "scope": "recordError.details", "scopeKind": "class", "description": "unavailable"}, {"name": "reason: context?.reason || \"Technical error captured\",", "scope": "recordError.options", "scopeKind": "class", "description": "unavailable"}, {"name": "reason: reason ?? null,", "scope": "logAction.entry", "scopeKind": "class", "description": "unavailable"}, {"name": "stack: error?.stack ?? null,", "scope": "recordError.details", "scopeKind": "class", "description": "unavailable"}, {"name": "timestamp: new Date().toISOString(),", "scope": "logAction.entry", "scopeKind": "class", "description": "unavailable"}, {"name": "userId: uid,", "scope": "logAction.entry", "scopeKind": "class", "description": "unavailable"}, {"name": "details: details && typeof details === \"object\" ? { ...details } : { value: String(details ?/", "scope": "logAction.entry.details", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"59": ""}]}